<!DOCTYPE html>
<html lang="en" class="dark" prefix="og: https://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <%- include('partials/meta') %>

  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/snow.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.5/lottie.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <script defer src="/js/utils.js"></script>
  <script defer src="/js/loader.js"></script>
  <script defer src="/js/animations.js"></script>

<title>Le calendrier de Margaux</title>
</head>

<body class="h-screen w-full flex flex-col justify-between relative body-radial-gradient">

  <div class="w-full h-full flex justify-center items-center body-radial-gradient" id="loader-container" >
    <div class="w-48" id="loader">
        
    </div>
  </div>

  <div id="fullscreen-photo-container" class="hidden z-50 absolute h-full w-full bg-gray-500">
    <p id="fullscreen-photo-caption" class="bg-black w-full top-0 text-white p-2 text-center"></p>
    <img class="h-full w-full object-cover" id="fullscreen-photo" src="" alt="">
  </div>

  <div id="close-button-container" class="hidden z-50 absolute bottom-0 w-full">
    <img id="close-button" class="absolute rounded-full bg-white p-4 bottom-0 mb-16 left-1/2 -translate-x-1/2" src="/assets/close-button.svg" alt="">
  </div>

  
  <form method="POST" action="" id="coupon-btns-validate" class="text-2xl font-semibold text-white absolute w-full bottom-0 z-50 mb-32 hidden justify-center items-center space-x-6">
    <a class="px-6 py-3 rounded-lg bg-[#80b0ff]" href="/">Retour</a>
    <input type="hidden" name="id" value="<%= coupon.id %>">
    <% if (!coupon.isCouponClaimed) { %>
      <button class="px-6 py-3 rounded-lg bg-[#16a34a]" type="submit">Valider</button>
    <% } %>
  </form>
  <% console.log(coupon) %>
  <%- include('partials/header', {isHomePage: false}) %>

  <main class="hidden flex-col items-center justify-center w-full h-2/4 relative z-20 ">
    <%- include('includes/coupon', {reward: coupon, isToday: false}) %>
  </main>

  <%- include('partials/footer') %>
  <div id="snow-container"  class="hidden absolute w-full h-full overflow-hidden z-10"></div>
  
  <script>
    const error = null;
    const rewardId = +"<%= coupon.day %>"
    document.addEventListener('DOMContentLoaded', async () => {
      displaySnow(6);

      const coupon = document.getElementById(`reward-${rewardId}`);

      const header = document.querySelector('header');
      const footer = document.querySelector('footer');
      header.classList.add('blur-sm');
      footer.classList.add('blur-sm');
    });


  </script>

</body>
</html>