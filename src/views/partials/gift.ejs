<script>
  document.addEventListener("DOMContentLoaded", () => {
    const day = +"<%= reward.day %>"
    const gift = document.querySelector(`#lottie-gift-${day}`);
    const giftContainer = document.querySelector(`.gift-container-${day}`);
    const reward = document.getElementById(`reward-${day}`);

    const animation = lottie.loadAnimation({
      container: gift,
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: '/lottie-files/gift.json'
    });

    animation.addEventListener('DOMLoaded', () => {
      animation.playSegments([8, 44], true);
      animation.play();
    });

    giftContainer.addEventListener('click', (e) => {
      if (giftContainer.style.scale == 1 && isLoaded) {
        giftAnimation(gift, animation, giftContainer, +"<%= reward.day %>", "<%= isToday %>" == "true");
        
        animation.playSegments([2, 44], true);
        animation.setDirection(-1);
        animation.play();
      }
    })
  });
</script>